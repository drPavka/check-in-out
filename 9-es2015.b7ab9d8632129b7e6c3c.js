(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{bD6a:function(e,t,n){"use strict";n.r(t),n.d(t,"CheckOutModule",(function(){return z}));var c=n("ofXK"),o=n("tyNb"),s=n("quSY"),r=n("2Vo4"),a=n("pLZG"),i=n("vkgz"),u=n("eIep"),l=n("fXoL"),b=n("4jVr"),d=n("y9W9"),h=n("sYmb"),p=n("kmnG"),v=n("d3UM"),f=n("FKr1"),m=n("IyRd");const g=["scanner"];function y(e,t){if(1&e&&(l.Qb(0,"mat-option",8),l.qc(1),l.Pb()),2&e){const e=t.$implicit;l.fc("value",e.deviceId),l.zb(1),l.sc(" ",e.label," ")}}const P=function(){return["QR_CODE"]};let O=(()=>{class e{constructor(e,t){this._operations=e,this._err=t,this._subs=new s.a,this.scanned$$=new r.a(!1),this.scannerEnabled=!0,this.currentDevice=null}ngOnInit(){this._subs.add(this.scanned$$.asObservable().pipe(Object(a.a)(e=>!!e),Object(a.a)(()=>this.scannerEnabled),Object(i.a)(()=>{this.scannerEnabled=!1}),Object(a.a)(e=>e.hasOwnProperty("id")&&e.hasOwnProperty("pc")),Object(u.a)(({id:e,pc:t})=>this._operations.checkOut$(e,t)),Object(i.a)(()=>{this.scannerEnabled=!0}),Object(a.a)(e=>!!e)).subscribe())}ngOnDestroy(){this._subs.unsubscribe()}onCamerasFound(e){console.log("camera found"),this.availableDevices=e,this.hasDevices=Boolean(e&&e.length);for(const t of e)if(/back|rear|environment/gi.test(t.label)){this.currentDevice=t;break}this.hasDevices&&!this.currentDevice&&(this.currentDevice=e[0])}onCamerasNotFound(){console.log("camera not found"),this.hasDevices=!1}onHasPermission(e){console.log("has permissions"),this.hasPermission=e}handleQrCodeResult(e){this.scanned$$.next(this._operations.parseCode(e))}scanError(){console.log("error")}onDeviceSelectChange(e){const t=this.availableDevices.find(t=>t.deviceId===e);this.currentDevice=t||null}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(b.a),l.Lb(d.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-check-out"]],viewQuery:function(e,t){var n;1&e&&l.vc(g,!0),2&e&&l.hc(n=l.Zb())&&(t.scanner=n.first)},decls:10,vars:7,consts:[[3,"translate"],[1,"device-select-field"],[3,"value","selectionChange"],[3,"value","translate"],["class","mat-option",3,"value",4,"ngFor","ngForOf"],[1,"scanner"],[3,"device","formats","tryHarder","scanSuccess","scanError","camerasFound","camerasNotFound","permissionResponse"],["scanner",""],[1,"mat-option",3,"value"]],template:function(e,t){1&e&&(l.Qb(0,"h3",0),l.qc(1,"Scan QR code"),l.Pb(),l.Qb(2,"mat-form-field",1),l.Qb(3,"mat-select",2),l.Yb("selectionChange",(function(e){return t.onDeviceSelectChange(e.value)})),l.Qb(4,"mat-option",3),l.qc(5,"No device selected"),l.Pb(),l.pc(6,y,2,2,"mat-option",4),l.Pb(),l.Pb(),l.Qb(7,"div",5),l.Qb(8,"zxing-scanner",6,7),l.Yb("scanSuccess",(function(e){return t.handleQrCodeResult(e)}))("scanError",(function(){return t.scanError()}))("camerasFound",(function(e){return t.onCamerasFound(e)}))("camerasNotFound",(function(){return t.onCamerasNotFound()}))("permissionResponse",(function(e){return t.onHasPermission(e)})),l.Pb(),l.Pb()),2&e&&(l.zb(3),l.fc("value",null!=t.currentDevice&&t.currentDevice.deviceId?t.currentDevice.deviceId:""),l.zb(1),l.fc("value",""),l.zb(2),l.fc("ngForOf",t.availableDevices),l.zb(2),l.fc("device",t.currentDevice)("formats",l.gc(6,P))("tryHarder",!0))},directives:[h.a,p.c,v.a,f.h,c.j,m.a],styles:["[_nghost-%COMP%]   zxing-scanner[_ngcontent-%COMP%] {width:100%;height:100%;-o-object-fit:contain;object-fit:contain}a[_ngcontent-%COMP%]{margin:0 auto;display:block;padding-top:36px;font-weight:400;color:grey!important;text-decoration:underline;text-transform:capitalize}"],changeDetection:0}),e})();var C=n("XiUz"),w=n("NFeN"),D=n("bTqV");let k=(()=>{class e{constructor(e){this._operations=e}ngOnInit(){}get visitors(){return this._operations.getVisitors()}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(b.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["app-check-out-success"]],decls:12,vars:1,consts:[["fxLayout","column","fxLayoutAlign","center center"],[3,"translate"],["color","accent",1,"symbol"],[1,"visitors"],["mat-raised-button","","color","accent","routerLink","/in-out/check-out"]],template:function(e,t){1&e&&(l.Qb(0,"div",0),l.Qb(1,"h1",1),l.qc(2,"Check-out successful"),l.Pb(),l.Qb(3,"mat-icon",2),l.qc(4,"exit_to_app"),l.Pb(),l.Qb(5,"p",3),l.Qb(6,"span",1),l.qc(7,"Number of guests currently checked-in"),l.Pb(),l.Pb(),l.Qb(8,"div",3),l.qc(9),l.Pb(),l.Qb(10,"button",4),l.qc(11,"Ok"),l.Pb(),l.Pb()),2&e&&(l.zb(9),l.sc("[",t.visitors,"]"))},directives:[C.b,C.a,h.a,w.a,D.b,o.b],styles:["[_nghost-%COMP%]{height:100%;flex:1}.visitors[_ngcontent-%COMP%]{color:#8bc34a}div.visitors[_ngcontent-%COMP%]{line-height:200%;font-size:300%}"]}),e})();var Q=n("73Ib");const _=[{path:"",component:(()=>{class e{constructor(){}get toolbarType(){return Q.b.checkOut}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Fb({type:e,selectors:[["app-layout"]],decls:4,vars:6,consts:[[3,"showBackButton","showLogoutButton","title","type"],[1,"content"]],template:function(e,t){1&e&&(l.Mb(0,"app-toolbar",0),l.bc(1,"translate"),l.Qb(2,"div",1),l.Mb(3,"router-outlet"),l.Pb()),2&e&&l.fc("showBackButton",!0)("showLogoutButton",!0)("title",l.cc(1,4,"Check-out"))("type",t.toolbarType)},directives:[Q.a,o.d],pipes:[h.d],styles:[".mat-icon[_ngcontent-%COMP%]{color:#fff}"]}),e})(),children:[{path:"",component:O},{path:"success",component:k}]}];let F=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},imports:[[o.c.forChild(_)],o.c]}),e})();var j=n("PCNd");let z=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},imports:[[c.b,F,m.b,j.a]]}),e})()}}]);