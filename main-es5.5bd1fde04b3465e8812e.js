function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{0:function(t,e,n){t.exports=n("zUnb")},AytR:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r="https://idme.ch/",a={production:!0,backend:{host:r,prefix:"checkinout/api/",auth_prefix:"api/",base:r+"checkinout/api/"}}},PCNd:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n("ofXK"),a=n("/t3+"),o=n("STbY"),c=n("NFeN"),i=n("bTqV"),s=n("YUcS"),u=n("3Pt+"),l=n("kmnG"),b=n("qFsG"),f=n("tk/3"),h=n("sYmb"),p=n("fXoL"),d=function(){var t=function t(){_classCallCheck(this,t)};return t.\u0275mod=p.Ib({type:t}),t.\u0275inj=p.Hb({factory:function(e){return new(e||t)},imports:[[r.c,a.b,o.b,c.b,i.c,s.a,u.l,l.d,b.b,f.c,h.c],r.c,a.b,o.b,c.b,i.c,s.a,u.l,l.d,b.b,f.c,h.c]}),t}()},TAFP:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("z6cu"),a=n("AytR"),o=n("JIr8"),c=n("fXoL"),i=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){if(!t.url.match("json")){var n=(("authenticate"===t.url?a.a.backend.host+a.a.backend.auth_prefix:a.a.backend.base)+"/"+t.url).split("/").filter((function(t){return!!t})).join("/").replace(/(https?:)\//,"$1//");t=t.clone({url:n})}return e.handle(t).pipe(Object(o.a)((function(t){var e=t.error.hasOwnProperty("detail")?t.error.detail:t.error.hasOwnProperty("message")?t.error.message:t.message;return Object(r.a)(new Error(e))})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.Gb({token:t,factory:t.\u0275fac}),t}()},khYj:function(t,e,n){"use strict";n.d(e,"b",(function(){return f})),n.d(e,"a",(function(){return h}));var r=n("fXoL"),a=n("LRne"),o=n("Cfvw"),c=n("vkgz"),i=n("eIep"),s=n("JIr8"),u=n("tk/3"),l=n("y9W9"),b=n("tyNb"),f=new r.q("local_storage"),h=function(){var t=function(){function t(e,n,r,a){_classCallCheck(this,t),this._http=e,this._storage=n,this._err=r,this._router=a}return _createClass(t,[{key:"authorize$",value:function(t){var e=this;return this._http.post("authenticate",t).pipe(Object(c.a)(this._saveTokenData.bind(this)),Object(i.a)((function(t){return e._http.get("user/"+t.userId,{headers:{Authorization:"Bearer "+t.id_token}}).pipe(Object(c.a)(e._saveUserData.bind(e)),Object(i.a)((function(n){return e._http.get("club/"+n.clubId,{headers:{Authorization:"Bearer "+t.id_token}})})),Object(c.a)(e._saveClubData.bind(e)))})),Object(s.a)((function(t){return e._err.handleError(t),Object(a.a)(t)})))}},{key:"logOut$",value:function(){return this._storage.remove("authorization"),this._storage.remove("user"),this._storage.remove("club"),Object(o.a)(this._router.navigate(["/"]))}},{key:"_saveTokenData",value:function(t){var e=t.id_token;this._storage.set("authorization",e)}},{key:"_saveUserData",value:function(t){this._storage.set("user",t)}},{key:"_saveClubData",value:function(t){this._storage.set("club",t)}},{key:"isLoggedIn$",get:function(){return Object(a.a)(this._storage.has("authorization"))}},{key:"token",get:function(){return this._storage.has("authorization")?this._storage.get("authorization"):null}},{key:"user",get:function(){return this._storage.has("user")?this._storage.get("user"):null}},{key:"club",get:function(){return this._storage.has("club")?this._storage.get("club"):null}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Tb(u.b),r.Tb(f),r.Tb(l.a),r.Tb(b.a))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},qyK6:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("tk/3"),a=n("LRne"),o=n("fXoL"),c=function(){var t=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"intercept",value:function(t,e){var n=t.url;switch(console.log("Make a backend call to",n),n){case"/club/registration/validation":case"/club/checkout":case"/club/checkin":return Object(a.a)(new r.e({status:201,body:{currentGuestNumber:0,maxGuestNumber:0}}))}return e.handle(t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=o.Gb({token:t,factory:t.\u0275fac}),t}()},y9W9:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("fXoL"),a=n("dNgK"),o=n("sYmb"),c=function(){var t=function(){function t(e,n,r){_classCallCheck(this,t),this._snack=e,this._zone=n,this._translate=r}return _createClass(t,[{key:"handleError",value:function(t){var e=this;this._zone.run((function(){e._snackBar=e._snack.open(e._translate.instant(t.message),e._translate.instant("close"),{data:t,panelClass:"error",duration:5e3})}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(r.Tb(a.a),r.Tb(r.z),r.Tb(o.e))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},zUnb:function(t,e,n){"use strict";n.r(e);var r,a,o=n("fXoL"),c=n("AytR"),i=n("jhN1"),s=n("tyNb"),u=((r=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||r)},r.\u0275cmp=o.Eb({type:r,selectors:[["app-layout"]],decls:3,vars:0,consts:[[1,"mobile-center"],[1,"card"]],template:function(t,e){1&t&&(o.Pb(0,"div",0),o.Pb(1,"main",1),o.Lb(2,"router-outlet"),o.Ob(),o.Ob())},directives:[s.e],styles:["[_nghost-%COMP%]{flex-direction:column;flex:1;height:100%}[_nghost-%COMP%], main[_ngcontent-%COMP%]{display:flex}.mobile-center[_ngcontent-%COMP%], main[_ngcontent-%COMP%]{flex-direction:column}.mobile-center[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}@media (min-width:600px){.mobile-center[_ngcontent-%COMP%]{height:100vh}}a[_ngcontent-%COMP%]{text-decoration:none}"],changeDetection:0}),r),l=n("/t3+"),b=n("XiUz"),f=n("sYmb"),h=n("NFeN"),p=n("bTqV"),d=((a=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=o.Eb({type:a,selectors:[["app-error"]],decls:14,vars:0,consts:[["color","warn"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","routerLink","/"],[1,"content"],["fxLayout","column","fxLayoutAlign","center center"],[3,"translate"],["color","warn",1,"symbol"],["mat-raised-button","","color","warn","routerLink","/"]],template:function(t,e){1&t&&(o.Pb(0,"mat-toolbar",0),o.Pb(1,"mat-toolbar-row"),o.Pb(2,"a",1),o.Pb(3,"h1"),o.pc(4,"Check In Out - Error"),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Pb(5,"div",2),o.Pb(6,"div",3),o.Pb(7,"h3",4),o.pc(8,"Page Not Found"),o.Ob(),o.Pb(9,"mat-icon",5),o.pc(10,"cancel"),o.Ob(),o.Lb(11,"p"),o.Pb(12,"button",6),o.pc(13,"Ok"),o.Ob(),o.Ob(),o.Ob())},directives:[l.a,l.c,s.c,b.a,b.c,b.b,f.a,h.a,p.b,s.b],styles:[""]}),a),m=n("XNiG"),_=n("quSY"),v=n("Cfvw"),g=n("3Pt+"),y=n("pLZG"),k=n("lJxs"),O=n("eIep"),C=n("tk/3"),w=n("khYj"),P=n("kmnG"),j=n("qFsG"),x=n("ofXK");function L(t,e){1&t&&(o.Pb(0,"mat-error",5),o.pc(1,"Login required"),o.Ob())}function I(t,e){1&t&&(o.Pb(0,"mat-error",5),o.pc(1,"Password required"),o.Ob())}var z,T,N,q,G,M=((T=function(){function t(e,n){_classCallCheck(this,t),this._auth=e,this._router=n,this.submit$$=new m.a,this._subs=new _.a}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.form=new g.d({username:new g.b("",[g.n.required]),password:new g.b("",[g.n.required])}),this._subs.add(this.submit$$.asObservable().pipe(Object(y.a)((function(){return t.form.valid})),Object(k.a)((function(){return Object.assign({},t.form.value,{rememberMe:!1})})),Object(O.a)(this._auth.authorize$.bind(this._auth)),Object(y.a)((function(t){return!(t instanceof Error||t instanceof C.d)})),Object(O.a)((function(){return Object(v.a)(t._router.navigate(["in-out"]))}))).subscribe())}},{key:"ngOnDestroy",value:function(){this._subs.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||T)(o.Kb(w.a),o.Kb(s.a))},T.\u0275cmp=o.Eb({type:T,selectors:[["app-login"]],decls:25,vars:7,consts:[[2,"background-color","gray"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","routerLink","/"],[1,"content"],[1,"main-content",3,"formGroup","ngSubmit"],["fxLayout","column",1,"central-content"],[3,"translate"],["autofocus","","formControlName","username","matInput","","required","","type","text"],[3,"translate",4,"ngIf"],["formControlName","password","matInput","","required","","type","password"],["fxLayoutAlign","center center","fxLayout","column",1,"top-margin"],["color","primary","mat-raised-button","","type","submit",3,"disabled","translate"],["mat-button","",1,"restore-password",3,"translate"]],template:function(t,e){1&t&&(o.Pb(0,"mat-toolbar",0),o.Pb(1,"mat-toolbar-row"),o.Pb(2,"a",1),o.Pb(3,"h1"),o.pc(4),o.ac(5,"translate"),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Pb(6,"div",2),o.Pb(7,"form",3),o.Xb("ngSubmit",(function(){return e.submit$$.next()})),o.Pb(8,"section",4),o.Pb(9,"div"),o.Pb(10,"mat-form-field"),o.Pb(11,"mat-label",5),o.pc(12,"Username"),o.Ob(),o.Lb(13,"input",6),o.oc(14,L,2,0,"mat-error",7),o.Ob(),o.Pb(15,"mat-form-field"),o.Pb(16,"mat-label",5),o.pc(17,"Password"),o.Ob(),o.Lb(18,"input",8),o.oc(19,I,2,0,"mat-error",7),o.Ob(),o.Ob(),o.Pb(20,"div",9),o.Pb(21,"button",10),o.pc(22,"Login "),o.Ob(),o.Pb(23,"a",11),o.pc(24,"Don't remember the password?"),o.Ob(),o.Ob(),o.Ob(),o.Ob(),o.Ob()),2&t&&(o.zb(4),o.qc(o.bc(5,5,"Login page")),o.zb(3),o.ec("formGroup",e.form),o.zb(7),o.ec("ngIf",e.form.controls.username.hasError("required")),o.zb(5),o.ec("ngIf",e.form.controls.password.hasError("required")),o.zb(2),o.ec("disabled",e.form.invalid))},directives:[l.a,l.c,s.c,b.a,b.c,b.b,g.o,g.j,g.e,P.b,P.e,f.a,g.a,j.a,g.i,g.c,g.m,x.j,p.b,p.a,P.a],pipes:[f.d],styles:[".central-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;align-items:center}a.restore-password[_ngcontent-%COMP%]{color:grey;font-weight:400;font-size:16px;text-decoration:underline}.top-margin[_ngcontent-%COMP%]{margin-top:36px}"],changeDetection:0}),T),A=((z=function(){function t(e,n){_classCallCheck(this,t),this._auth=e,this._router=n}return _createClass(t,[{key:"canActivate",value:function(t,e){var n=this;return this._auth.isLoggedIn$.pipe(Object(k.a)((function(t){return t||n._router.parseUrl("/")})))}}]),t}()).\u0275fac=function(t){return new(t||z)(o.Tb(w.a),o.Tb(s.a))},z.\u0275prov=o.Gb({token:z,factory:z.\u0275fac,providedIn:"root"}),z),E=[{path:"",component:u,children:[{path:"",component:M,canActivate:[(N=function(){function t(e,n){_classCallCheck(this,t),this._auth=e,this._router=n}return _createClass(t,[{key:"canActivate",value:function(t,e){var n=this;return this._auth.isLoggedIn$.pipe(Object(k.a)((function(t){return!t||n._router.parseUrl("in-out")})))}}]),t}(),N.\u0275fac=function(t){return new(t||N)(o.Tb(w.a),o.Tb(s.a))},N.\u0275prov=o.Gb({token:N,factory:N.\u0275fac,providedIn:"root"}),N)]},{path:"in-out",loadChildren:function(){return n.e(7).then(n.bind(null,"J6bi")).then((function(t){return t.InOutModule}))},canActivate:[A]},{path:"**",component:d}]}],D=((G=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ib({type:G}),G.\u0275inj=o.Hb({factory:function(t){return new(t||G)},imports:[[s.d.forRoot(E)],s.d]}),G),$=((q=function t(e){_classCallCheck(this,t),this.title="check-in-out-app",e.addLangs(["en","de"]),e.setDefaultLang("en"),e.use("de")}).\u0275fac=function(t){return new(t||q)(o.Kb(f.e))},q.\u0275cmp=o.Eb({type:q,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&o.Lb(0,"router-outlet")},directives:[s.e],encapsulation:2,changeDetection:0}),q),X=n("R1ws"),F=n("qyK6"),U=n("SX+u"),K=n("y9W9"),R=n("PCNd"),Y=n("TAFP"),S=n("mqiu"),J=n("dNgK");function B(t){return new S.a(t,c.a.production?"/check-in-out/assets/i18n/":"/assets/i18n/")}var H,W=((H=function t(){_classCallCheck(this,t)}).\u0275mod=o.Ib({type:H,bootstrap:[$]}),H.\u0275inj=o.Hb({factory:function(t){return new(t||H)},providers:[{provide:w.b,useExisting:U.a},{useClass:K.a,provide:o.m},{useClass:F.a,provide:C.a,multi:!0},{useClass:Y.a,provide:C.a,multi:!0}],imports:[[i.a,D,X.b,R.a,J.b,f.c.forRoot({loader:{provide:f.b,useFactory:B,deps:[C.b]}})]]}),H);c.a.production&&Object(o.S)(),i.c().bootstrapModule(W).catch((function(t){return console.error(t)}))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0,6]]]);